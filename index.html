<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Weather App</title>
	</head>
	<body>
		<h1 id="weather"></h1>
		<input type="text" placeholder="Zip Code" id="new-location" />
		<button id="change-location">Lookup</button>

		<script>
			getWeather(72758);

			document
				.getElementById('change-location')
				.addEventListener('click', function () {
					getWeather(document.getElementById('new-location').value);
				});

			function getWeather(zipcode) {
				let request = new XMLHttpRequest();
				request.open(
					'GET',
					'https://api.openweathermap.org/data/2.5/weather?zip=' +
						zipcode +
						',us&appid=ccef2c8c8034982955bec1e0b2a83e36'
				);
				request.addEventListener('load', function (event) {
					let resp = JSON.parse(event.currentTarget.responseText);

					console.log(resp);
					document.getElementById('weather').innerText =
						resp.name +
						' is ' +
						resp.weather[0].main +
						' and ' +
						Math.ceil(resp.main.temp) +
						' degrees today.';
				});
				request.send();
			}
		</script>
	</body>
</html>
